{"ast":null,"code":"import _slicedToArray from \"/Users/adodge/lighthouse/SocialCinema/social-cinema/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport { useReducer, useEffect } from \"react\";\nimport reducer, { SET_USER, SET_GENRES, SET_LATER_MOVIES, SET_FRIENDS, SET_GROUP } from \"../reducers/application\";\nimport axios from 'axios';\n\nconst initGenres = () => {\n  let genres = [];\n  return axios.get(\"http://localhost:5000/api/genres\").then(response => {\n    genres = response.data.map(genre => {\n      return genre = {\n        id: genre.id,\n        preference: \"\"\n      };\n    });\n    return genres;\n  });\n};\n\nexport default function useApplicationData() {\n  const _useReducer = useReducer(reducer, {\n    user: JSON.parse(localStorage.getItem('user')) || \"\",\n    genres: [],\n    favorite_movies: [],\n    later_movies: [],\n    friends: []\n  }),\n        _useReducer2 = _slicedToArray(_useReducer, 2),\n        state = _useReducer2[0],\n        dispatch = _useReducer2[1];\n\n  useEffect(() => {\n    initGenres().then(res => {\n      setGenres(res);\n    });\n  }, []);\n  useEffect(() => {\n    if (state.user !== \"\") {\n      Promise.all([axios.get(\"http://localhost:5000/api/\".concat(state.user.name, \"/genres\"))]).then(all => {\n        setGenres(all[0].data.genres);\n      });\n    }\n  }, [state.user]);\n\n  const setUser = user => {\n    localStorage.setItem('user', JSON.stringify(user));\n    dispatch({\n      type: SET_USER,\n      value: user\n    });\n  };\n\n  const setGenres = genres => {\n    if (genres.length === 0) {\n      initGenres().then(res => {\n        dispatch({\n          type: SET_GENRES,\n          value: res\n        });\n      });\n    } else {\n      dispatch({\n        type: SET_GENRES,\n        value: genres\n      });\n    }\n  };\n\n  const setLaterMovies = laterMovies => {\n    dispatch({\n      type: SET_LATER_MOVIES,\n      value: laterMovies\n    });\n  };\n\n  const setFriends = friends => {\n    dispatch({\n      type: SET_FRIENDS,\n      value: friends\n    });\n  };\n\n  const setGroup = group => {\n    dispatch({\n      type: SET_GROUP,\n      value: group\n    });\n  };\n\n  return {\n    state,\n    setUser,\n    setGenres,\n    setLaterMovies,\n    setFriends,\n    setGroup\n  };\n}\n;","map":{"version":3,"sources":["/Users/adodge/lighthouse/SocialCinema/social-cinema/src/hooks/useApplicationData.js"],"names":["useReducer","useEffect","reducer","SET_USER","SET_GENRES","SET_LATER_MOVIES","SET_FRIENDS","SET_GROUP","axios","initGenres","genres","get","then","response","data","map","genre","id","preference","useApplicationData","user","JSON","parse","localStorage","getItem","favorite_movies","later_movies","friends","state","dispatch","res","setGenres","Promise","all","name","setUser","setItem","stringify","type","value","length","setLaterMovies","laterMovies","setFriends","setGroup","group"],"mappings":"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","sourcesContent":["import { useReducer, useEffect } from \"react\";\nimport reducer, { SET_USER, SET_GENRES, SET_LATER_MOVIES, SET_FRIENDS, SET_GROUP } from \"../reducers/application\";\nimport axios from 'axios'\n\nconst initGenres = () => {\n  let genres = []\n  return axios.get(\"http://localhost:5000/api/genres\")\n  .then(response => {\n    genres = response.data.map(genre => {\n      return genre = {\n        id: genre.id,\n        preference: \"\"\n      }\n    })\n\n    return genres\n  })\n}\n\nexport default function useApplicationData() {\n  const [state, dispatch] = useReducer(reducer, {\n    user: JSON.parse(localStorage.getItem('user')) || \"\",\n    genres: [],\n    favorite_movies: [],\n    later_movies: [],\n    friends: []\n  });\n\n  useEffect(() => {\n    initGenres()\n    .then(res => {\n      setGenres(res);\n    })\n  }, [])\n\n  useEffect(() => {\n    if (state.user !== \"\") {\n      Promise.all([\n        axios.get(`http://localhost:5000/api/${state.user.name}/genres`)\n      ])\n      .then((all) => {\n        setGenres(all[0].data.genres)\n      })\n    }\n  }, [state.user])\n\n  const setUser = user => {\n    localStorage.setItem('user', JSON.stringify(user));\n    dispatch({ type: SET_USER, value: user });\n  };\n\n  const setGenres = genres => {\n    if (genres.length === 0) {\n      initGenres()\n      .then(res => {\n        dispatch({ type: SET_GENRES, value: res });\n      })\n    } else {\n      dispatch({ type: SET_GENRES, value: genres });\n    }\n  };\n\n  const setLaterMovies = laterMovies => {\n    dispatch({ type: SET_LATER_MOVIES, value:laterMovies });\n  }\n\n  const setFriends = friends => {\n    dispatch({ type: SET_FRIENDS, value: friends });\n  }\n\n  const setGroup = group => {\n    dispatch({ type: SET_GROUP, value: group });\n  }\n\n  return { state, setUser, setGenres, setLaterMovies, setFriends, setGroup };\n};\n"]},"metadata":{},"sourceType":"module"}