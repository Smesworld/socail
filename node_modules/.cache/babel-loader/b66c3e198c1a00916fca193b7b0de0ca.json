{"ast":null,"code":"import _slicedToArray from \"/Users/adodge/lighthouse/SocialCinema/social-cinema/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport { useReducer, useEffect } from \"react\";\nimport reducer, { SET_USER, SET_GENRES } from \"../reducers/application\";\nimport axios from 'axios';\nexport default function useApplicationData() {\n  const _useReducer = useReducer(reducer, {\n    user: JSON.parse(localStorage.getItem('user')) || \"\",\n    genres: [],\n    favorite_movies: {},\n    later_movies: {}\n  }),\n        _useReducer2 = _slicedToArray(_useReducer, 2),\n        state = _useReducer2[0],\n        dispatch = _useReducer2[1];\n\n  useEffect(() => {\n    if (state.user !== \"\") Promise.all([axios.get(\"http://localhost:5000/api/\".concat(state.user.name, \"/genres\"))]);\n  }, []);\n\n  const setUser = user => {\n    localStorage.setItem('user', JSON.stringify(user));\n    dispatch({\n      type: SET_USER,\n      value: user\n    });\n  };\n\n  const setGenres = genres => {\n    dispatch({\n      type: SET_GENRES,\n      value: genres\n    });\n  };\n\n  return {\n    state,\n    setUser,\n    setGenres\n  };\n}\n;","map":{"version":3,"sources":["/Users/adodge/lighthouse/SocialCinema/social-cinema/src/hooks/useApplicationData.js"],"names":["useReducer","useEffect","reducer","SET_USER","SET_GENRES","axios","useApplicationData","user","JSON","parse","localStorage","getItem","genres","favorite_movies","later_movies","state","dispatch","Promise","all","get","name","setUser","setItem","stringify","type","value","setGenres"],"mappings":";AAAA,SAASA,UAAT,EAAqBC,SAArB,QAAsC,OAAtC;AACA,OAAOC,OAAP,IAAkBC,QAAlB,EAA4BC,UAA5B,QAA8C,yBAA9C;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,eAAe,SAASC,kBAAT,GAA8B;AAAA,sBACjBN,UAAU,CAACE,OAAD,EAAU;AAC5CK,IAAAA,IAAI,EAAEC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAX,KAA4C,EADN;AAE5CC,IAAAA,MAAM,EAAE,EAFoC;AAG5CC,IAAAA,eAAe,EAAE,EAH2B;AAI5CC,IAAAA,YAAY,EAAE;AAJ8B,GAAV,CADO;AAAA;AAAA,QACpCC,KADoC;AAAA,QAC7BC,QAD6B;;AAQ3Cf,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIc,KAAK,CAACR,IAAN,KAAe,EAAnB,EACAU,OAAO,CAACC,GAAR,CAAY,CACVb,KAAK,CAACc,GAAN,qCAAuCJ,KAAK,CAACR,IAAN,CAAWa,IAAlD,aADU,CAAZ;AAGD,GALQ,EAKN,EALM,CAAT;;AAOA,QAAMC,OAAO,GAAGd,IAAI,IAAI;AACtBG,IAAAA,YAAY,CAACY,OAAb,CAAqB,MAArB,EAA6Bd,IAAI,CAACe,SAAL,CAAehB,IAAf,CAA7B;AACAS,IAAAA,QAAQ,CAAC;AAAEQ,MAAAA,IAAI,EAAErB,QAAR;AAAkBsB,MAAAA,KAAK,EAAElB;AAAzB,KAAD,CAAR;AACD,GAHD;;AAKA,QAAMmB,SAAS,GAAGd,MAAM,IAAI;AAC1BI,IAAAA,QAAQ,CAAC;AAAEQ,MAAAA,IAAI,EAAEpB,UAAR;AAAoBqB,MAAAA,KAAK,EAAEb;AAA3B,KAAD,CAAR;AACD,GAFD;;AAIA,SAAO;AAAEG,IAAAA,KAAF;AAASM,IAAAA,OAAT;AAAkBK,IAAAA;AAAlB,GAAP;AACD;AAAA","sourcesContent":["import { useReducer, useEffect } from \"react\";\nimport reducer, { SET_USER, SET_GENRES } from \"../reducers/application\";\nimport axios from 'axios'\n\nexport default function useApplicationData() {\n  const [state, dispatch] = useReducer(reducer, {\n    user: JSON.parse(localStorage.getItem('user')) || \"\",\n    genres: [],\n    favorite_movies: {},\n    later_movies: {}\n  });\n\n  useEffect(() => {\n    if (state.user !== \"\")\n    Promise.all([\n      axios.get(`http://localhost:5000/api/${state.user.name}/genres`)\n    ])\n  }, [])\n\n  const setUser = user => {\n    localStorage.setItem('user', JSON.stringify(user));\n    dispatch({ type: SET_USER, value: user });\n  };\n\n  const setGenres = genres => {\n    dispatch({ type: SET_GENRES, value: genres });\n  };\n\n  return { state, setUser, setGenres };\n};\n"]},"metadata":{},"sourceType":"module"}